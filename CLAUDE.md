# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## Project Overview

Hexplore is an Unreal Engine 5.7 action RPG using C++ and Blueprints. The project uses the Gameplay Ability System (GAS) for combat, attributes, and abilities.

## Build Commands

```bash
# Build from command line (Windows)
"C:\Program Files\Epic Games\UE_5.7\Engine\Build\BatchFiles\Build.bat" Hexplore Win64 Development "C:\Users\trist\Documents\Unreal Projects\Hexplore\Hexplore.uproject"

# Generate Visual Studio project files
"C:\Program Files\Epic Games\UE_5.7\Engine\Build\BatchFiles\GenerateProjectFiles.bat" "C:\Users\trist\Documents\Unreal Projects\Hexplore\Hexplore.uproject"
```

Typically developed through Visual Studio or Rider with the .sln generated by Unreal.

## Architecture

### Core Systems

**Ability System (`AbilitySystem/`)**
- `HexploreAbilitySystemComponent` - Custom ASC with effect tracking broadcasts
- `HexploreAttributeSet` - Defines Vital (Health, Stamina), Primary (Strength, Dexterity, Vigor, Endurance), and Secondary (Armor, CritChance, etc.) attributes
- `HexploreGameplayAbility` - Base ability class with InputTag support for binding abilities to input
- Abilities in `Abilities/` folder: `HexploreAttack`, `HexploreBuffSpell`

**Character System (`Character/`)**
- `HexploreCharacterBase` - Abstract base implementing AbilitySystemInterface and CombatInterface, handles weapon mesh and default attributes via GameplayEffects
- `HexploreCharacter` - Player character
- `HexploreEnemy` - Enemies implementing TargetInterface for highlight feedback

**Input System (`Input/`)**
- `HexploreInputComponent` - Custom EnhancedInputComponent with `BindAbilityActions<T>()` template for mapping InputActions to ability activation
- `HexploreInputConfig` - DataAsset mapping InputActions to GameplayTags

**Player Framework (`Player/`)**
- `HexplorePlayerController` - Input setup, cursor tracing for targeting, routes ability input through ASC
- `HexplorePlayerState` - Owns the ASC and AttributeSet (for multiplayer replication)

**UI System (`UI/`)**
- `HexploreWidgetController` - Base controller with FWidgetControllerParams
- `OverlayWidgetController` - Main HUD widget controller

### Key Patterns

1. **GAS Architecture**: Abilities triggered via InputTag → PlayerController → ASC. All attribute changes flow through GameplayEffects.

2. **Input-to-Ability Binding**: InputActions are mapped to GameplayTags in `DA_HexploreInputConfig`. The custom InputComponent binds Started/Completed/Triggered states to ability handlers.

3. **Gameplay Tags**: Native tags defined in `FHexploreGameplayTags` singleton (initialized at startup). Tags used for attributes (`Attributes.Vital.Health`), input (`InputTag.Ability.1`), and messages.

4. **Effect Actors**: `HexploreEffectActor` applies GameplayEffects with configurable policies (instant/duration/infinite, apply on overlap/end, etc.).

5. **Interfaces**: `CombatInterface` (buff socket locations), `TargetInterface` (enemy highlighting), `AbilitySystemInterface` (ASC access).

### Module Dependencies

From `Hexplore.Build.cs`:
- Public: Core, CoreUObject, Engine, InputCore, EnhancedInput, GameplayAbilities
- Private: GameplayTags, GameplayTasks

### Blueprint Organization

```
Content/Blueprints/
├── AbilitySystem/
│   ├── GameplayAbilities/Attacks/, Buffs/
│   ├── GameplayEffects/Attributes/
│   └── Data/DA_AttributeInfo
├── Character/BP_HexploreCharacter, ABP_Hexplore
├── Input/IA_*, IMC_*, DA_HexploreInputConfig
└── Character/Enemies/Wolf/BP_Wolf
```

### Class Naming

All custom C++ classes use "Hexplore" prefix (e.g., `UHexploreAttributeSet`, `AHexploreCharacter`).
